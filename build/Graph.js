!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Graph=e():t.Graph=e()}(this,function(){return function(t){function e(s){if(i[s])return i[s].exports;var n=i[s]={exports:{},id:s,loaded:!1};return t[s].call(n.exports,n,n.exports,e),n.loaded=!0,n.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){"use strict";function s(t){this.application=t,this.type="line",this.size={width:400,height:400},this.range={min:0,max:0},this.points=[],this.labels={row:[],column:[],positions:{row:[],column:[]},increment:10,prefix:"",suffix:""},this.font={family:"monospace",size:12},this.percentages=[],this.colors=["#2388F2","#F65237","#0DEFA5","#9B7CF3"],this.horizontal=!1,this.shadow=!0,this.prefix="",this.containerId,this.container,this.svg,this.Events=new a}var n=i(1),o=i(2),r=i(3),a=i(4),h=function(t){return window[t]=new s(t),window[t]};s.prototype.makeLineBarCalculations=function(){this.range=n.getMinMax(this.points),this.labels.row=n.getPointIncrements(this.range.max,this.labels.increment)},s.prototype.makePieDoughnutCalculations=function(){this.range=n.getMinMax(this.points),this.percentages=n.getSetPercentages(this.points),this.degrees=n.getDegrees(this.percentages,360)},s.prototype.makeDialCalculations=function(){this.range=n.getMinMax(this.points),this.percentages=n.getPercentages(this.points),this.degrees=n.getDegrees(this.percentages,260)},s.prototype.lineBuildSvg=function(){this.makeLineBarCalculations(),this.labels.positions.row=n.calculateRowPositions(this.labels.row,this.size.height),this.labels.positions.column=n.calculateColumnPositions(this.labels.column,this.size.width);var t=r.graphLines(this.labels,this.size),e=r.columnLabelText(this.labels,this.labels.column,this.font,this.size),i=r.rowLabelText(this.labels,this.labels.row,this.font,this.size),s=r.lineSets(this.application,this.labels.positions.column,this.labels.row[0],this.points,this.range,this.size,this.colors),a=[],h=o.group({transform:"translate("+this.widthOffset+","+this.heightOffset/2+")"},t),l=o.group({transform:"translate("+this.widthOffset+","+this.heightOffset/2+")"},s),p=o.group({transform:"translate("+this.widthOffset+","+this.heightOffset+")"},e),u=o.group({transform:"translate(0,"+this.heightOffset/2+")"},i);a.push(h),a.push(l),a.push(p),a.push(u);var c=o.group({},a);this.svg=r.svg(this.container,this.font.size,this.size,this.padding),n.appendChild(this.svg,c)},s.prototype.barBuildSvg=function(){this.makeLineBarCalculations();var t=this.labels.column,e=this.labels.row;this.horizontal&&(t=this.labels.row,e=this.labels.column,this.labels.row.reverse()),this.labels.positions.column=n.calculateColumnPositions(t,this.size.width),this.labels.positions.row=n.calculateRowPositions(e,this.size.height);var i=r.graphLines(this.labels,this.size),s=r.columnLabelText(this.labels,t,this.font,this.size),a=r.rowLabelText(this.labels,e,this.font,this.size),h=r.barSets(this.labels,this.points,this.size,this.horizontal,this.colors,this.shadow),l=[],p=o.group({transform:"translate("+this.widthOffset+","+this.heightOffset/2+")"},i),u=o.group({transform:"translate("+this.widthOffset+","+this.heightOffset/2+")"},h),c=o.group({transform:"translate("+this.widthOffset+","+this.heightOffset+")"},s),f=o.group({transform:"translate(0,"+this.heightOffset/2+")"},a);l.push(p),l.push(u),l.push(c),l.push(f);var g=o.group({},l);this.svg=r.svg(this.container,this.font.size,this.size,this.padding),n.appendChild(this.svg,g)},s.prototype.pieBuildSvg=function(){this.makePieDoughnutCalculations();var t=r.bottomLeftLabelText(this.labels.column,this.font,this.size,this.colors),e=r.pieSets(this.degrees,this.size,this.colors,this.shadow),i=[],s=o.group({transform:"translate(0,"+this.heightOffset+")"},t),a=o.group({transform:"translate("+this.widthOffset/2+","+this.heightOffset/2+")"},e);i.push(s),i.push(a);var h=o.group({},i);this.svg=r.svg(this.container,this.font.size,this.size,this.padding),n.appendChild(this.svg,h)},s.prototype.doughnutBuildSvg=function(){this.makePieDoughnutCalculations();var t=r.bottomLeftLabelText(this.labels.column,this.font,this.size,this.colors),e=r.centerLabelText("50",this.font,this.size,"#000"),i=r.doughnutSets(this.degrees,this.size,this.colors,this.shadow),s=[],a=o.group({transform:"translate(0,"+this.heightOffset+")"},t),h=o.group({transform:"translate("+this.widthOffset/2+","+this.heightOffset/2+")"},i),l=o.group({transform:"translate("+this.widthOffset/2+","+this.heightOffset/2+")"},e);s.push(a),s.push(h),s.push(l);var p=o.group({},s);this.svg=r.svg(s,this.font.size,this.size,this.padding),n.appendChild(this.svg,p)},s.prototype.dialBuildSvg=function(){this.makeDialCalculations();var t=r.centerLabelText(100*this.percentages[0],this.font,this.size,"#fff"),e=r.bottomCenterLabelText(this.points[0][0]+"/"+this.points[0][1],this.font,this.size,"#000"),i=r.dialSets(this.degrees,this.percentages,this.size,this.colors,this.shadow),s=[],a=o.group({transform:"translate("+this.widthOffset/2+","+this.heightOffset/2+")"},i),h=o.group({transform:"translate("+this.widthOffset/2+","+this.heightOffset/2+")"},t),l=o.group({transform:"translate("+this.widthOffset/2+","+this.heightOffset+")"},e);s.push(a),s.push(h),s.push(l);var p=o.group({},s);this.svg=r.svg(s,this.font.size,this.size,this.padding),n.appendChild(this.svg,p)},s.prototype.render=function(){switch(this.padding={x:40,y:50},this.widthOffset=this.font.size/2+this.padding.x,this.heightOffset=this.font.size/2+this.padding.y,this.type){case"line":this.lineBuildSvg();break;case"bar":this.barBuildSvg();break;case"pie":this.pieBuildSvg();break;case"doughnut":this.doughnutBuildSvg();break;case"dial":this.dialBuildSvg()}n.appendChild(this.container,this.svg)},s.prototype.setContainer=function(t){this.containerId=t,this.container=document.getElementById(t)},s.prototype.setType=function(t){this.type=t},s.prototype.setSize=function(t,e){this.size.width=t,this.size.height=e},s.prototype.setLabels=function(t){this.labels.column=t},s.prototype.setPoints=function(t){this.points=t},s.prototype.setIncrement=function(t){this.labels.increment=t},s.prototype.setHorizontal=function(t){this.horizontal=t},s.prototype.setShadow=function(t){this.shadow=t},s.prototype.setColors=function(t){this.colors=t},s.prototype.setPrefix=function(t){this.labels.prefix=t},s.prototype.setSuffix=function(t){this.labels.suffix=t},s.prototype.setFontFamily=function(t){this.font.family=t},s.prototype.setFontSize=function(t){this.font.size=t},t.exports=h},function(t,e){"use strict";function i(){}i.prototype.setElementAttributes=function(t,e){for(var i in e){var s=i.replace(/[A-Z]/g,function(t){return"-"+t.toLowerCase()});t.setAttribute(s,e[i])}},i.prototype.styleToString=function(t){var e="";for(var i in t){var s=i.replace(/[A-Z]/g,function(t){return"-"+t.toLowerCase()});e+=s+":"+t[i]+";"}return e},i.prototype.appendChild=function(t,e){t.appendChild(e)},i.prototype.appendChildren=function(t,e){e.map(function(e){t.appendChild(e)})},i.prototype.setDivPosition=function(t,e,i){t.style.position="absolute",t.style.left=e+"px",t.style.top=i+"px"},i.prototype.buildPathString=function(t){var e="";return t.forEach(function(t,i,s){e+=t.type,t.values&&t.values.map(function(t){e+=t+" "})}),e.trim()},i.prototype.flattenPoints=function(t){var e=[];return t.map(function(t){t.map(function(t){"object"==typeof t?t.map(function(t){e.push(t)}):e.push(t)})}),e},i.prototype.getPointIncrements=function(t,e){for(var i=Math.ceil(t/e)+1,s=[],n=0;i>n;n++)s.push(n*e);return s.reverse(),s},i.prototype.getSetPercentages=function(t){var e=[],i=this.flattenPoints(t),s=i.reduce(function(t,e){return t+e},0);return t.map(function(t){e.push(t[0]/s)}),e},i.prototype.getPercentages=function(t){var e=[],i=this.flattenPoints(t);return e.push(i[0]/i[1]),e},i.prototype.getDegrees=function(t,e){var i=[];return t.map(function(t){i.push(t*e)}),i},i.prototype.getMinMax=function(t){var e={},i=this.flattenPoints(t);return e.min=Array.min(i),e.max=Array.max(i),e},i.prototype.calculateColumnPositions=function(t,e){var i=[],s=e/(t.length-1);return t.forEach(function(t,e,n){var o=Math.round(s*e);i.push(o)}),i},i.prototype.calculateRowPositions=function(t,e){var i=[],s=e/(t.length-1);return t.forEach(function(t,e,n){var o=Math.round(s*e);i.push(o)},this),i},i.prototype.calculateY=function(t,e,i){var s=this.normalizeY(t,e,i);return this.reversePosY(s,0,i)},i.prototype.calculateX=function(t,e,i){return this.normalizeX(t,e,i)},i.prototype.normalizeY=function(t,e,i){return i/e*t},i.prototype.normalizeX=function(t,e,i){return i/e*t},i.prototype.reversePosY=function(t,e,i){return i+e-t},i.prototype.reversePosX=function(t,e,i){return i+e-t},i.prototype.calculateAngleX=function(t,e,i){return t+e*Math.cos(Math.PI*(i/180))},i.prototype.calculateAngleY=function(t,e,i){return t+e*Math.sin(Math.PI*(i/180))},i.prototype.sortDesc=function(t,e){return e-t},Array.max=function(t){return Math.max.apply(Math,t)},Array.min=function(t){return Math.min.apply(Math,t)},t.exports=new i},function(t,e,i){"use strict";function s(){}var n=i(1);s.prototype.text=function(t){var e=document.createElementNS("http://www.w3.org/2000/svg","text");return n.setElementAttributes(e,t),e},s.prototype.line=function(t){var e=document.createElementNS("http://www.w3.org/2000/svg","line");return n.setElementAttributes(e,t),e},s.prototype.circle=function(t){var e=document.createElementNS("http://www.w3.org/2000/svg","circle");return n.setElementAttributes(e,t),e},s.prototype.rect=function(t){var e=document.createElementNS("http://www.w3.org/2000/svg","rect");return n.setElementAttributes(e,t),e},s.prototype.path=function(t){var e=document.createElementNS("http://www.w3.org/2000/svg","path");return n.setElementAttributes(e,t),e},s.prototype.svg=function(t){var e=document.createElementNS("http://www.w3.org/2000/svg","svg");return n.setElementAttributes(e,t),e},s.prototype.group=function(t,e){var i=document.createElementNS("http://www.w3.org/2000/svg","g");return n.setElementAttributes(i,t),n.appendChildren(i,e),i},s.prototype.div=function(t){var e=document.createElement("div");return n.setElementAttributes(e,t),e},s.prototype.dash=function(t){var e=[{type:"M",values:[0,0]},{type:"",values:[-2.6,0]},{type:"",values:[-3.8,-20]},{type:"",values:[3.8,-20]},{type:"",values:[2.6,0]},{type:"Z"}];t.d=n.buildPathString(e);var i=this.path(t);return i},s.prototype.shadow=function(t,e,i,s){var o={def:null,element:null};o.def=this.filterShadow(e,i);var r=s.cloneNode(!0);return t.filter="url(#"+e+")",n.setElementAttributes(r,t),o.element=r,o},s.prototype.defs=function(){var t=document.createElementNS("http://www.w3.org/2000/svg","defs");return t},s.prototype.clipPath=function(t,e){var i=document.createElementNS("http://www.w3.org/2000/svg","clipPath");return n.setElementAttributes(i,{id:t}),n.appendChild(i,e),i},s.prototype.filterShadow=function(t,e){var i=document.createElementNS("http://www.w3.org/2000/svg","filter"),s=document.createElementNS("http://www.w3.org/2000/svg","feGaussianBlur"),o=document.createElementNS("http://www.w3.org/2000/svg","feBlend");return n.setElementAttributes(i,{id:t,width:"200%",height:"200%"}),n.setElementAttributes(s,{"in":"SourceAlpha",result:"blurOut"}),s.setAttribute("stdDeviation",e),n.setElementAttributes(o,{"in":"blurOut",mode:"normal"}),n.appendChild(i,s),n.appendChild(i,o),i},t.exports=new s},function(t,e,i){"use strict";function s(){}var n=i(1),o=i(2);s.prototype.columnLabelText=function(t,e,i,s){var n=[];return e.forEach(function(e,r,a){var h=t.positions.column[r],l=o.text({x:h,y:s.height,fill:"#888",fontSize:i.size,fontFamily:i.family,textAnchor:"middle"}),p=e;l.innerHTML=p,n.push(l)}),n},s.prototype.rowLabelText=function(t,e,i,s){var n=[];return e.forEach(function(e,s,r){var a=t.positions.row[s]+i.size/2,h=o.text({x:0,y:a,fill:"#888",fontSize:i.size,fontFamily:i.family,textAnchor:"right"}),l=t.prefix+e+t.suffix;h.innerHTML=l,n.push(h)}),n},s.prototype.bottomLeftLabelText=function(t,e,i,s){var r=[];return t.forEach(function(a,h,l){var p=1.4*e.size,u=t.length-1,c=p*u-p*h,f=n.reversePosY(c,0,i.height),g=o.text({x:0,y:f,fill:s[h],fontSize:e.size,fontFamily:e.family,textAnchor:"right"}),d=a;g.innerHTML=d,r.push(g)}),r},s.prototype.bottomCenterLabelText=function(t,e,i,s){var r=[],a=i.width/2,h=n.reversePosY(0,0,i.height),l=o.text({x:a,y:h,fill:s,fontSize:e.size,fontFamily:e.family,textAnchor:"middle"});return l.innerHTML=t,r.push(l),r},s.prototype.centerLabelText=function(t,e,i,s){var n=[],r=i.width/2,a=e.size/2+i.height/2,h=o.text({x:r,y:a,fill:s,fontSize:e.size,fontFamily:e.family,textAnchor:"middle"});return h.innerHTML=t,n.push(h),n},s.prototype.lineSets=function(t,e,i,s,r,a,h){var l=[];return s.forEach(function(r,p,u){var c=[];r.forEach(function(t,s,o){var r=s>0?"":"M";c.push({type:r,values:[e[s],n.calculateY(t,i,a.height)]})});var f=n.buildPathString(c);window.sets=s,window.columnPositions=e;var g=o.path({d:f,stroke:h[p],strokeWidth:8,strokeLinecap:"round",fill:"none",onmousemove:t+".Events.onMouseOver(evt, "+t+", "+p+", "+i+")",onmouseout:t+".Events.onMouseOut(evt, "+t+")"});l.push(g)}),l},s.prototype.graphLines=function(t,e){var i=[];return t.positions.column.map(function(t){var s=o.line({x1:t,y1:0,x2:t,y2:e.height,stroke:"#ccc",strokeDasharray:"5, 5"});i.push(s)}),t.positions.row.map(function(t){var s=o.line({x1:0,y1:t,x2:e.width,y2:t,stroke:"#ccc",strokeDasharray:"5, 5"});i.push(s)}),i},s.prototype.barSets=function(t,e,i,s,r,a){var h=[];return e.forEach(function(e,l,p){var u=0;e.sort(n.sortDesc),e.forEach(function(p,c,f){var g,d=16,v=-(d/4),y=(d+v)*(e.length-1)/2,m={fill:"transparent",stroke:r[u],strokeWidth:d,strokeLinecap:"round"},w=-(d/3),x={opacity:"0.15",fill:"transparent",stroke:"#000",strokeWidth:d,strokeLinecap:"round"};if("number"==typeof p){var b=[];if(s){x.transform="translate("+-w+", 0)",g=t.row[t.row.length-1];var z=t.positions.row[l]+c*(d+v)-y;b.push({type:"M",values:[n.calculateX(0,g,i.width),z]}),b.push({type:"",values:[n.calculateX(p,g,i.width)-d/2,z]})}else{x.transform="translate("+w+", 0)",g=t.row[0];var S=t.positions.column[l]+c*(d+v)-y;b.push({type:"M",values:[S,n.calculateY(0,g,i.height)]}),b.push({type:"",values:[S,n.calculateY(p,g,i.height)+d/2]})}var A=n.buildPathString(b);if(a){x.d=A;var E=o.path(x,b);h.push(E)}m.d=A;var P=o.path(m,b);h.push(P),u++}else"object"==typeof p&&(p.sort(n.sortDesc),p.map(function(e){m.stroke=r[u];var p=[];if(s){x.transform="translate("+-w+", 0)",g=t.row[t.row.length-1];var f=t.positions.row[l]+c*(d+v)-y;p.push({type:"M",values:[n.calculateX(0,g,i.width),f]}),p.push({type:"",values:[n.calculateX(e,g,i.width)-d/2,f]})}else{x.transform="translate("+w+", 0)",g=t.row[0];var b=t.positions.column[l]+c*(d+v)-y;p.push({type:"M",values:[b,n.calculateY(0,g,i.height)]}),p.push({type:"",values:[b,n.calculateY(e,g,i.height)+d/2]})}var z=n.buildPathString(p);if(a){x.d=z;var S=o.path(x,p);h.push(S)}m.d=z;var A=o.path(m,p);h.push(A),u++}))})}),h},s.prototype.pieSets=function(t,e,i,s){var r=[],a={x:e.width/2,y:e.height/2},h=e.height/2,l=0;t.forEach(function(t,e,s){var p={fill:i[e]},u=e>0?l:0,c=-90+u,f=0+c,g=t+c;l+=t;var d=180+c,v=n.calculateAngleX(a.x,h,f),y=n.calculateAngleY(a.y,h,f),m=[{type:"M",values:[a.x,a.y]},{type:"",values:[v,y]}],w=[];t>180&&w.push(d),w.push(g),w.map(function(t){var e=n.calculateAngleX(a.x,h,t),i=n.calculateAngleY(a.y,h,t);m.push({type:"A",values:[h,h,0,0,1]}),m.push({type:"",values:[e,i]})}),m.push({type:"Z"}),p.d=n.buildPathString(m),r.push(o.path(p))});var p=[],u=o.group({},r);if(s){var c=o.defs(),s=o.shadow({opacity:.15},"pie-shadow",8,u);n.appendChild(c,s.def),p.push(c),p.push(s.element)}return p.push(u),p},s.prototype.doughnutSets=function(t,e,i,s){var r={x:e.width/2,y:e.height/2},a=e.height/2,h=a-40,l=n.calculateAngleX(r.x,a,0),p=n.calculateAngleY(r.y,a,0),u=n.calculateAngleX(r.x,a,180),c=n.calculateAngleY(r.y,a,180),f=n.calculateAngleX(r.x,h,0),g=n.calculateAngleY(r.y,h,0),d=n.calculateAngleX(r.x,h,180),v=n.calculateAngleY(r.y,h,180),y=[{type:"M",values:[l,p]},{type:"A",values:[a,a,0,0,1]},{type:"",values:[u,c]},{type:"A",values:[a,a,0,0,1]},{type:"",values:[l,p]},{type:"Z"},{type:"M",values:[f,g]},{type:"A",values:[h,h,0,0,0]},{type:"",values:[d,v]},{type:"A",values:[h,h,0,0,0]},{type:"",values:[f,g]},{type:"Z"}],m=[],w={d:n.buildPathString(y)},x=o.path(w),b=o.defs(),z=o.clipPath("doughnut-clip",x);n.appendChild(b,z);var S=this.pieSets(t,e,i,!1)[0];n.setElementAttributes(S,{clipPath:"url(#doughnut-clip)"});var A=o.group({},[S]);if(s){var s=o.shadow({opacity:.15},"doughnut-shadow",8,A);n.appendChild(b,s.def),m.push(s.element)}return m.push(b),m.push(S),m},s.prototype.dialSets=function(t,e,i,s,r){for(var a={x:i.width/2,y:i.height/2},h=i.height/3.2,l=t-220,p=h-15,u=n.calculateAngleX(a.x,p,l),c=n.calculateAngleY(a.y,p,l),f=[],g=h+15,d=-150,v=0;260>v;v+=20){var y=v/260>e?.2:1,m=n.calculateAngleX(a.x,g,v-d),w=n.calculateAngleY(a.y,g,v-d),x=o.dash({transform:"translate("+m+", "+w+") rotate("+(v-120)+", 0, 0)",fill:s[0],opacity:y});f.push(x)}var b=[],z=o.group({},f),S=o.circle({cx:a.x,cy:a.y,r:h,fill:s[0]}),A=o.circle({cx:u,cy:c,r:5,fill:"#fff"});if(r){var E=o.defs(),r=o.shadow({opacity:.15},"pie-shadow",8,S);n.appendChild(E,r.def),b.push(E),b.push(r.element)}return b.push(S),b.push(A),b.push(z),b},s.prototype.tooltip=function(t,e,i,s){var r=n.styleToString({width:"100px",padding:"10px 20px",margin:"none",color:"#fff",boxShadow:"4px 4px 0 rgba(0, 0, 0, 0.2)",background:s}),a=o.div({id:t,style:r});return a},s.prototype.svg=function(t,e,i,s){var n=e/2+s.x,r=e/2+s.y,a=i.width+n,h=i.height+r,l={width:a,height:h},p=o.svg(l);return p},t.exports=new s},function(t,e,i){"use strict";function s(){}var n=(i(2),i(3)),o=i(1);s.prototype.getSvg=function(t){var e=document.getElementById(t),i=e.getElementsByTagName("svg")[0],s=t+"-tooltip",n=document.getElementById(s),o={container:e,svg:i,tooltipId:s,tooltip:n};return o},s.prototype.getNormalizedX=function(t,e,i){return t+i-e},s.prototype.getNormalizedY=function(t,e,i){return t-i-e},s.prototype.onMouseOver=function(t,e,i,s){var r=this.getSvg(e.containerId),a=e.colors[i],h=r.container.getBoundingClientRect(),l=(r.svg.getBoundingClientRect(),t.clientX-h.left),p=t.clientY-h.top,u=e.size.width,c=e.size.height,f=e.padding,g={x:20,y:20},d=this.getNormalizedX(l,f.x,g.x),v=(this.getNormalizedY(p,f.y,g.y),window.columnPositions.length-1),y=(d+g.x)/(u/v),m=Math.floor(y),w=(window.columnPositions[m]-g.x,o.calculateY(window.sets[i][m],s,c),[window.sets[i][m],window.sets[i][m+1]]),x=Math.floor((w[1]-w[0])*(y%1)+w[0]);if(r.tooltip){var b=o.styleToString({padding:"0",margin:"0",fontFamily:e.font.family});if(!isNaN(x)){var z=e.labels.prefix+x.toString()+e.labels.suffix;r.tooltip.innerHTML='<p style="'+b+'">'+z+"</p>"}o.setDivPosition(r.tooltip,l+10,p+10)}else{var S=e.containerId+"-tooltip",A=n.tooltip(S,l,p,a);o.setDivPosition(A,l+10,p+10),o.appendChild(r.container,A)}},s.prototype.onMouseOut=function(t,e){var i=this.getSvg(e.containerId);i.tooltip&&i.tooltip.remove()},t.exports=s}])});